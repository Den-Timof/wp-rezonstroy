(function(t){t.fn.jcImgScroll=function(e){var i={speed:400,width:618,height:342,offsetX:100,setZoom:.7,loadClass:"loading",position:"center",count:5,arrow:{width:110,height:342,x:20,y:0},NumBtn:!1,setNumBtn:{width:19,height:18,x:0,y:362},title:!0,setTitle:{height:35,border:8,bgColor:"#6ba600",color:"#fff",padding:20,opacity:.8}};e=t.extend(i,e);return this.each(function(){function i(t,e,i){l.hide().css("z-index",-1).eq(t).addClass("select").siblings().removeClass("select"),l.eq(t).find("img").fadeTo(100,.5).fadeTo(200,1),i.eq(t).addClass("curr").siblings().removeClass("curr");var o=d(t,r),n=o.length,s=null;for(s=0;s<n;s++)u(l.eq(o[s]),e[s][0],e[s][1],e[s][2],e[s][3],e[s][4],150)}var o=t(this),n=[],s=0,r=0,h=t("a",o),a=t("ul",o),l=t("li",a),d=function(t,e){var i=[t];for(b=0;b<=e;b++)i.push(t+(b+1)),i.unshift(t-(b+1)<0?99:t-(b+1));return i},u=function(t,e,i,o,n,s,r){t.show().css("z-index",s).animate({top:i,left:e,height:n,width:o},r)};object=function(t){this.length=t,this.setNum=e.setNumBtn,this.NumBtnDom=function(t,e,i,o,n){return'<dl style="z-index:11;width:'+e+"px;height:"+i+"px;position:absolute;left:"+o+"px;top:"+n+'px;">'+t+"<dl>"},this.arrow=function(t,e,i,o,n,s){return'<em class="sPrev" id="sPrev" style="position:absolute;cursor:pointer;z-index:10;width:'+i+"px;height:"+o+"px;left:"+(t-i-n)+'px;"></em><em class="sNext" id="sNext" style="position:absolute;cursor:pointer;z-index:10;width:'+i+"px;height:"+o+"px;left:"+(e+n)+"px;top:"+s+'px;"></em>'},this.hoverDom=function(t,e,i,o,n,s,r,h){return'<div style="display:none;cursor:pointer;border:'+o+"px solid "+n+";width:"+(e-2*o)+"px;height:"+(i-2*o)+'px;position:absolute;z-index:1;"></div><b style="display:none;padding:0 '+s+"px;width:"+(e-2*s-2*o)+"px;color:"+r+";text-shadow:none;background:"+n+";position:absolute;z-index:2;left:"+o+"px;bottom:"+o+"px;height:0px;overflow:hidden;line-height:"+(h+5)+'px;">'+t+"</b>"}},object.prototype.Initial=function(t){if(e.count>this.length)return alert('"Count" parameter can not be greater than the total number of pictures, you must base !'),!1;if(e.count<0)return alert('"Count" parameter can not be negative, you must base  !'),!1;if(e.count%2==0)return alert('"Count" parameter must base  !'),!1;this.arrNumList=[],this.arrImgObj=[],this.arrData=[],this.centerIdx=Math.round(this.length/2)-1,this.centerCount=Math.floor(e.count/2)-1,s=this.centerIdx,r=this.centerCount,this.indexArr=d(this.centerIdx,this.centerCount),a.css({position:"relative",width:e.width,height:e.height,margin:"0 auto"});var i=null,n=null,h=null,c=2,f=this.centerCount+1,p=this.indexArr[this.centerCount+1],m=a.offset().left,g=a.offset().left+e.width,x=function(t,i){var o=null;switch(t){case"top":o=0;break;case"center":o=.5*(e.height-i);break;case"bottom":o=e.height-i;break;default:alert('Parameters "position" Error, "top", "center", "bottom" !')}return o};for(i=0;i<this.length;i++){var b=l.eq(i),w=b.find("a"),v=w.attr("path"),y=w.attr("title");for(b.addClass(e.loadClass).css({width:e.width,height:e.height,position:"absolute",display:"none",overflow:"hidden","z-index":0}),oImg=new Image,oImg.src=v,oImg.title=y,oImg.width=e.width,oImg.height=e.height,this.arrImgObj.push(oImg),n=0;n<e.count;n++)if(i===this.indexArr[n]){var N=i>p?i-c:i,I=i>p?i-this.centerIdx:f,C=Math.round(e.width/I*e.setZoom),T=Math.round(e.height/I*e.setZoom),j=Math.round(x(e.position,T));left=Math.round(e.offsetX*I),i<p&&(f-=1,left*=-1),i>p&&(c+=2,left=e.width-C+left),i==p&&(b.addClass("select"),C=e.width,T=e.height,left=0,j=0),u(b,left,j,C,T,N,1.5*e.speed),this.arrData.push([left,j,C,T,N]);break}if(e.title&&b.prepend(this.hoverDom(y,e.width,e.height,e.setTitle.border,e.setTitle.bgColor,e.setTitle.padding,e.setTitle.color,e.setTitle.height)).find("div").css("opacity",0).end().find("b").css("opacity",0),e.NumBtn){var D="cursor:pointer;float:left;height:"+this.setNum.height+"px;width:"+this.setNum.width+"px;overflow:hidden;";h=this.centerIdx===i?'<dd class="curr" style="'+D+'">'+i+"</dd>":'<dd style="'+D+'">'+i+"</dd>",this.arrNumList.push(h)}}if(o.prepend(this.arrow(m,g,e.arrow.width,e.arrow.height,e.arrow.x,e.arrow.y)).find("em").show(0),0!=this.arrNumList.length){var k=this.arrNumList.join(""),z=this.setNum.width*this.length,B=this.setNum.height,q=.5*(o.width()-z)+this.setNum.x;o.append(this.NumBtnDom(k,z,B,q,this.setNum.y)).find("dl").show()}return t.call(this,this.arrImgObj),this.arrData};var c=new object(h.length);n=c.Initial(function(i){for(var o in i)i[o].tmp=o,i[o].onload=function(){var o=this.tmp,n=h.eq(o);n.html(t(i[o])).find("img").fadeIn(600).parents("li").removeClass(e.loadClass)};(function(t){var e=null,i=arguments,o=i.length;for(e=1;e<o;e++)delete t[i[e]]})(this,"arrImgObj","arrNumList","NumBtnDom","arrow","hoverDom","setNum","indexArr")}),c.Initial=null,c=null,object=null;var f=h.length,p=t("#sPrev",o),m=t("#sNext",o),g=t("dd",o);if(p.click(function(){return s>0&&(s-=1,i(s,n,g)),!1}),m.click(function(){return s<f-1&&(s+=1,i(s,n,g)),!1}),g.click(function(){s=t(this).index(),i(s,n,g)}),e.title){e.setTitle.border,e.height,e.width;var x=e.setTitle.height;t("li.select",o).on("mouseover",function(){return t(this).find("div").show().animate({opacity:e.setTitle.opacity},100),t(this).find("b").show().delay(100).stop().animate({height:x,opacity:e.setTitle.opacity},150),!1}),l.mouseleave(function(){return t(this).find("b").show().stop().animate({height:0,opacity:0},150),t(this).find("div").delay(150).stop().animate({opacity:0},100),!1})}return!1})}})(jQuery);